<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Imap (imap.Imap)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">imap</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Imap</span></h1></header><p>Non-blocking IMAP4 protocol codec.</p><p><code class="code">Imap</code> is a Lwt-compatible client library for the
<a href="https://tools.ietf.org/html/rfc3501">IMAP4</a> protocol, together with some
<a href="index.html#limitations">extensions</a>.</p><h4>References</h4><ul><li>M. Crispin
<em><a href="https://tools.ietf.org/html/rfc3501">INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1</a>, 2003</em></li></ul><h2 id="limitations" class="anchored"><a href="#limitations" class="anchor"></a>Supported extensions and limitations</h2><p>The following extensions are supported:
</p><ul><li><a href="https://tools.ietf.org/html/rfc4551">CONDSTORE</a></li><li><a href="https://tools.ietf.org/html/rfc5162">QRESYNC</a></li><li><a href="https://tools.ietf.org/html/rfc5161">ENABLE</a></li><li><a href="https://tools.ietf.org/html/rfc4315">UIDPLUS</a></li><li><a href="https://tools.ietf.org/html/rfc6154">SPECIAL-USE</a></li><li><a href="https://tools.ietf.org/html/rfc2177">IDLE</a></li><li><a href="https://developers.google.com/gmail/imap_extensions">X-GM-EXT-1</a></li></ul><h2>Common types for IMAP</h2><div class="spec type" id="type-modseq"><a href="#type-modseq" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>modseq</code><code><span class="keyword"> = </span><span class="keyword">private </span>int64</code><code></code></div><div class="doc"><p>Modification sequence numbers.</p></div></div><div class="spec type" id="type-uid"><a href="#type-uid" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>uid</code><code><span class="keyword"> = </span><span class="keyword">private </span>int32</code><code></code></div><div class="doc"><p>Message unique identification numbers.</p></div></div><div class="spec type" id="type-seq"><a href="#type-seq" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>seq</code><code><span class="keyword"> = </span><span class="keyword">private </span>int32</code><code></code></div><div class="doc"><p>Message sequence numbers.</p></div></div><div class="spec type" id="type-date"><a href="#type-date" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>date</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-date.day" class="anchored"><td class="def field"><a href="#type-date.day" class="anchor"></a><code>day : int;</code></td></tr><tr id="type-date.month" class="anchored"><td class="def field"><a href="#type-date.month" class="anchor"></a><code>month : int;</code></td></tr><tr id="type-date.year" class="anchored"><td class="def field"><a href="#type-date.year" class="anchor"></a><code>year : int;</code></td></tr></table><code>}</code><code></code></div><div class="doc"></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-date_of_sexp"><a href="#val-date_of_sexp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>date_of_sexp : Sexplib.Sexp.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-date">date</a></code></div><div class="doc"></div></div><div class="spec val" id="val-sexp_of_date"><a href="#val-sexp_of_date" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_date : <a href="index.html#type-date">date</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><div class="spec type" id="type-time"><a href="#type-time" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>time</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-time.hours" class="anchored"><td class="def field"><a href="#type-time.hours" class="anchor"></a><code>hours : int;</code></td></tr><tr id="type-time.minutes" class="anchored"><td class="def field"><a href="#type-time.minutes" class="anchor"></a><code>minutes : int;</code></td></tr><tr id="type-time.seconds" class="anchored"><td class="def field"><a href="#type-time.seconds" class="anchor"></a><code>seconds : int;</code></td></tr><tr id="type-time.zone" class="anchored"><td class="def field"><a href="#type-time.zone" class="anchor"></a><code>zone : int;</code></td></tr></table><code>}</code><code></code></div><div class="doc"></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-time_of_sexp"><a href="#val-time_of_sexp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>time_of_sexp : Sexplib.Sexp.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-time">time</a></code></div><div class="doc"></div></div><div class="spec val" id="val-sexp_of_time"><a href="#val-sexp_of_time" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_time : <a href="index.html#type-time">time</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><div class="spec type" id="type-capability"><a href="#type-capability" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>capability</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-capability.IMAP4rev1" class="anchored"><td class="def constructor"><a href="#type-capability.IMAP4rev1" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">IMAP4rev1</span></code></td></tr><tr id="type-capability.ACL" class="anchored"><td class="def constructor"><a href="#type-capability.ACL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">ACL</span></code></td></tr><tr id="type-capability.BINARY" class="anchored"><td class="def constructor"><a href="#type-capability.BINARY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BINARY</span></code></td></tr><tr id="type-capability.CATENATE" class="anchored"><td class="def constructor"><a href="#type-capability.CATENATE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">CATENATE</span></code></td></tr><tr id="type-capability.CHILDREN" class="anchored"><td class="def constructor"><a href="#type-capability.CHILDREN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">CHILDREN</span></code></td></tr><tr id="type-capability.COMPRESS_DEFLATE" class="anchored"><td class="def constructor"><a href="#type-capability.COMPRESS_DEFLATE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">COMPRESS_DEFLATE</span></code></td></tr><tr id="type-capability.CONDSTORE" class="anchored"><td class="def constructor"><a href="#type-capability.CONDSTORE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">CONDSTORE</span></code></td></tr><tr id="type-capability.ESEARCH" class="anchored"><td class="def constructor"><a href="#type-capability.ESEARCH" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">ESEARCH</span></code></td></tr><tr id="type-capability.ENABLE" class="anchored"><td class="def constructor"><a href="#type-capability.ENABLE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">ENABLE</span></code></td></tr><tr id="type-capability.IDLE" class="anchored"><td class="def constructor"><a href="#type-capability.IDLE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">IDLE</span></code></td></tr><tr id="type-capability.ID" class="anchored"><td class="def constructor"><a href="#type-capability.ID" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">ID</span></code></td></tr><tr id="type-capability.LITERALPLUS" class="anchored"><td class="def constructor"><a href="#type-capability.LITERALPLUS" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">LITERALPLUS</span></code></td></tr><tr id="type-capability.LITERALMINUS" class="anchored"><td class="def constructor"><a href="#type-capability.LITERALMINUS" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">LITERALMINUS</span></code></td></tr><tr id="type-capability.UTF8_ACCEPT" class="anchored"><td class="def constructor"><a href="#type-capability.UTF8_ACCEPT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">UTF8_ACCEPT</span></code></td></tr><tr id="type-capability.UTF8_ONLY" class="anchored"><td class="def constructor"><a href="#type-capability.UTF8_ONLY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">UTF8_ONLY</span></code></td></tr><tr id="type-capability.MULTIAPPEND" class="anchored"><td class="def constructor"><a href="#type-capability.MULTIAPPEND" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">MULTIAPPEND</span></code></td></tr><tr id="type-capability.NAMESPACE" class="anchored"><td class="def constructor"><a href="#type-capability.NAMESPACE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">NAMESPACE</span></code></td></tr><tr id="type-capability.QRESYNC" class="anchored"><td class="def constructor"><a href="#type-capability.QRESYNC" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">QRESYNC</span></code></td></tr><tr id="type-capability.QUOTE" class="anchored"><td class="def constructor"><a href="#type-capability.QUOTE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">QUOTE</span></code></td></tr><tr id="type-capability.SORT" class="anchored"><td class="def constructor"><a href="#type-capability.SORT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SORT</span></code></td></tr><tr id="type-capability.STARTTLS" class="anchored"><td class="def constructor"><a href="#type-capability.STARTTLS" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">STARTTLS</span></code></td></tr><tr id="type-capability.UIDPLUS" class="anchored"><td class="def constructor"><a href="#type-capability.UIDPLUS" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">UIDPLUS</span></code></td></tr><tr id="type-capability.UNSELECT" class="anchored"><td class="def constructor"><a href="#type-capability.UNSELECT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">UNSELECT</span></code></td></tr><tr id="type-capability.XLIST" class="anchored"><td class="def constructor"><a href="#type-capability.XLIST" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">XLIST</span></code></td></tr><tr id="type-capability.AUTH_ANONYMOUS" class="anchored"><td class="def constructor"><a href="#type-capability.AUTH_ANONYMOUS" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">AUTH_ANONYMOUS</span></code></td></tr><tr id="type-capability.AUTH_LOGIN" class="anchored"><td class="def constructor"><a href="#type-capability.AUTH_LOGIN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">AUTH_LOGIN</span></code></td></tr><tr id="type-capability.AUTH_PLAIN" class="anchored"><td class="def constructor"><a href="#type-capability.AUTH_PLAIN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">AUTH_PLAIN</span></code></td></tr><tr id="type-capability.XOAUTH2" class="anchored"><td class="def constructor"><a href="#type-capability.XOAUTH2" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">XOAUTH2</span></code></td></tr><tr id="type-capability.X_GM_EXT_1" class="anchored"><td class="def constructor"><a href="#type-capability.X_GM_EXT_1" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">X_GM_EXT_1</span></code></td></tr><tr id="type-capability.OTHER" class="anchored"><td class="def constructor"><a href="#type-capability.OTHER" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">OTHER</span><span class="keyword"> of </span>string</code></td></tr></table><code></code></div><div class="doc"><p>List of standard capabilites. These are returned by the <a href="index.html#type-capability">capability</a>
command, in status <span class="xref-unresolved" title="unresolved &quot;Code.code&quot;">codes</span> and can be enabled by the enable command.</p></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-capability_of_sexp"><a href="#val-capability_of_sexp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>capability_of_sexp : Sexplib.Sexp.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-capability">capability</a></code></div><div class="doc"></div></div><div class="spec val" id="val-sexp_of_capability"><a href="#val-sexp_of_capability" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_capability : <a href="index.html#type-capability">capability</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><h4>Envelope information</h4><p>Returned when fetching the <a href="Fetch/index.html#val-envelope">envelope message attribute</a>
using the <a href="index.html#val-fetch">fetch</a> command.</p><div class="spec type" id="type-address"><a href="#type-address" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>address</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-address.ad_name" class="anchored"><td class="def field"><a href="#type-address.ad_name" class="anchor"></a><code>ad_name : string;</code></td></tr><tr id="type-address.ad_adl" class="anchored"><td class="def field"><a href="#type-address.ad_adl" class="anchor"></a><code>ad_adl : string;</code></td></tr><tr id="type-address.ad_mailbox" class="anchored"><td class="def field"><a href="#type-address.ad_mailbox" class="anchor"></a><code>ad_mailbox : string;</code></td></tr><tr id="type-address.ad_host" class="anchored"><td class="def field"><a href="#type-address.ad_host" class="anchor"></a><code>ad_host : string;</code></td></tr></table><code>}</code><code></code></div><div class="doc"></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-address_of_sexp"><a href="#val-address_of_sexp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>address_of_sexp : Sexplib.Sexp.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-address">address</a></code></div><div class="doc"></div></div><div class="spec val" id="val-sexp_of_address"><a href="#val-sexp_of_address" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_address : <a href="index.html#type-address">address</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><div class="spec type" id="type-envelope"><a href="#type-envelope" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>envelope</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-envelope.env_date" class="anchored"><td class="def field"><a href="#type-envelope.env_date" class="anchor"></a><code>env_date : string;</code></td></tr><tr id="type-envelope.env_subject" class="anchored"><td class="def field"><a href="#type-envelope.env_subject" class="anchor"></a><code>env_subject : string;</code></td></tr><tr id="type-envelope.env_from" class="anchored"><td class="def field"><a href="#type-envelope.env_from" class="anchor"></a><code>env_from : <a href="index.html#type-address">address</a> list;</code></td></tr><tr id="type-envelope.env_sender" class="anchored"><td class="def field"><a href="#type-envelope.env_sender" class="anchor"></a><code>env_sender : <a href="index.html#type-address">address</a> list;</code></td></tr><tr id="type-envelope.env_reply_to" class="anchored"><td class="def field"><a href="#type-envelope.env_reply_to" class="anchor"></a><code>env_reply_to : <a href="index.html#type-address">address</a> list;</code></td></tr><tr id="type-envelope.env_to" class="anchored"><td class="def field"><a href="#type-envelope.env_to" class="anchor"></a><code>env_to : <a href="index.html#type-address">address</a> list;</code></td></tr><tr id="type-envelope.env_cc" class="anchored"><td class="def field"><a href="#type-envelope.env_cc" class="anchor"></a><code>env_cc : <a href="index.html#type-address">address</a> list;</code></td></tr><tr id="type-envelope.env_bcc" class="anchored"><td class="def field"><a href="#type-envelope.env_bcc" class="anchor"></a><code>env_bcc : <a href="index.html#type-address">address</a> list;</code></td></tr><tr id="type-envelope.env_in_reply_to" class="anchored"><td class="def field"><a href="#type-envelope.env_in_reply_to" class="anchor"></a><code>env_in_reply_to : string;</code></td></tr><tr id="type-envelope.env_message_id" class="anchored"><td class="def field"><a href="#type-envelope.env_message_id" class="anchor"></a><code>env_message_id : string;</code></td></tr></table><code>}</code><code></code></div><div class="doc"></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-envelope_of_sexp"><a href="#val-envelope_of_sexp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>envelope_of_sexp : Sexplib.Sexp.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-envelope">envelope</a></code></div><div class="doc"></div></div><div class="spec val" id="val-sexp_of_envelope"><a href="#val-sexp_of_envelope" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_envelope : <a href="index.html#type-envelope">envelope</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><div class="spec module" id="module-MIME"><a href="#module-MIME" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="MIME/index.html">MIME</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Flag"><a href="#module-Flag" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Flag/index.html">Flag</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Fetch"><a href="#module-Fetch" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Fetch/index.html">Fetch</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-MbxFlag"><a href="#module-MbxFlag" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="MbxFlag/index.html">MbxFlag</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h4>Mailbox status</h4><div class="spec module" id="module-Status"><a href="#module-Status" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Status/index.html">Status</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><p>Message search</p><div class="spec module" id="module-Search"><a href="#module-Search" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Search/index.html">Search</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h4>Connections</h4><div class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>error</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-error.Incorrect_tag" class="anchored"><td class="def constructor"><a href="#type-error.Incorrect_tag" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Incorrect_tag</span><span class="keyword"> of </span>string<span class="keyword"> * </span>string</code></td><td class="doc"><p>(** An unknown response tag was received. *)</p></td></tr><tr id="type-error.Decode_error" class="anchored"><td class="def constructor"><a href="#type-error.Decode_error" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Decode_error</span><span class="keyword"> of </span>string<span class="keyword"> * </span>string list<span class="keyword"> * </span>string</code></td><td class="doc"><p>(** Decoding error. *)</p></td></tr><tr id="type-error.Unexpected_cont" class="anchored"><td class="def constructor"><a href="#type-error.Unexpected_cont" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Unexpected_cont</span></code></td><td class="doc"><p>(** A continuation request '+' is received at an unexpected time. *)</p></td></tr><tr id="type-error.Bad_greeting" class="anchored"><td class="def constructor"><a href="#type-error.Bad_greeting" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Bad_greeting</span></code></td><td class="doc"><p>(** The server did not send a valid greeting message. *)</p></td></tr><tr id="type-error.Auth_error" class="anchored"><td class="def constructor"><a href="#type-error.Auth_error" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Auth_error</span><span class="keyword"> of </span>string</code></td><td class="doc"><p>(** A SASL authentication error ocurred. *)</p></td></tr><tr id="type-error.No" class="anchored"><td class="def constructor"><a href="#type-error.No" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">No</span><span class="keyword"> of </span>string</code></td><td class="doc"><p>(** Server replied NO. *)</p></td></tr><tr id="type-error.Bad" class="anchored"><td class="def constructor"><a href="#type-error.Bad" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Bad</span><span class="keyword"> of </span>string</code></td><td class="doc"><p>(** Server replied BAD. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p>The type for connections.</p></div></div><div class="spec val" id="val-uidnext"><a href="#val-uidnext" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>uidnext : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-uid">uid</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-messages"><a href="#val-messages" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>messages : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int option</code></div><div class="doc"></div></div><div class="spec val" id="val-recent"><a href="#val-recent" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>recent : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int option</code></div><div class="doc"></div></div><div class="spec val" id="val-unseen"><a href="#val-unseen" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>unseen : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int option</code></div><div class="doc"></div></div><div class="spec val" id="val-uidvalidity"><a href="#val-uidvalidity" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>uidvalidity : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-uid">uid</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-highestmodseq"><a href="#val-highestmodseq" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>highestmodseq : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-modseq">modseq</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-connect"><a href="#val-connect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>connect : string <span class="keyword">&#8209;&gt;</span> ?&#8288;port:int <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> ?&#8288;read_only:bool <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p><code class="code">connect server username password mailbox</code>.</p></div></div><div class="spec val" id="val-disconnect"><a href="#val-disconnect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>disconnect : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p>Disconnect.</p></div></div><h2>Commands</h2><div class="spec val" id="val-poll"><a href="#val-poll" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>poll : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-stop_poll"><a href="#val-stop_poll" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>stop_poll : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec val" id="val-create"><a href="#val-create" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">create imap name</code> creates a mailbox named <code class="code">name</code>.</p></div></div><div class="spec val" id="val-delete"><a href="#val-delete" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>delete : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">delete imap name</code> deletes mailbox <code class="code">name</code>.</p></div></div><div class="spec val" id="val-rename"><a href="#val-rename" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>rename : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">rename imap oldname newname</code> renames mailbox <code class="code">oldname</code> to <code class="code">newname</code>.</p></div></div><div class="spec val" id="val-noop"><a href="#val-noop" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>noop : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">noop imap</code> does nothing. Since any command can return a status update as
untagged data, the <code class="code">noop</code> command can be used as a periodic poll for new
messages or message status updates during a period of inactivity.</p></div></div><div class="spec val" id="val-list"><a href="#val-list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>list : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;ref:string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (<a href="MbxFlag/index.html#type-mbx_flag">MbxFlag.mbx_flag</a> list<span class="keyword"> * </span>char option<span class="keyword"> * </span>string) list Lwt.t</code></div><div class="doc"><p><code class="code">list imap ref m</code> returns the list of mailboxes with names matching
<code class="code">ref</code>.</p></div></div><div class="spec val" id="val-status"><a href="#val-status" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>status : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="Status/index.html#type-mbx_att_request">Status.mbx_att_request</a> list <span class="keyword">&#8209;&gt;</span> <a href="Status/index.html#type-response">Status.response</a> Lwt.t</code></div><div class="doc"><p><code class="code">status imap mbox items</code> requests status <code class="code">items</code> for mailbox <code class="code">mbox</code>.</p></div></div><div class="spec val" id="val-copy"><a href="#val-copy" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>copy : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-seq">seq</a> list <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">copy imap nums mbox</code> copies messages with sequence number in <code class="code">nums</code> to
mailbox <code class="code">mbox</code>.</p></div></div><div class="spec val" id="val-uid_copy"><a href="#val-uid_copy" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>uid_copy : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-uid">uid</a> list <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-expunge"><a href="#val-expunge" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>expunge : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">expunge imap</code> permanently removes all messages that have the <code class="code">Deleted</code>flag set from the currently selected mailbox.</p></div></div><div class="spec val" id="val-uid_expunge"><a href="#val-uid_expunge" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>uid_expunge : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-uid">uid</a> list <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p>Requires <code class="code">UIDPLUS</code> extension.</p></div></div><div class="spec val" id="val-search"><a href="#val-search" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>search : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Search/index.html#type-key">Search.key</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-seq">seq</a> list<span class="keyword"> * </span><a href="index.html#type-modseq">modseq</a> option) Lwt.t</code></div><div class="doc"><p><code class="code">uid_search imap key</code> returns the set of UIDs of messages satisfying the
criteria <code class="code">key</code>.</p></div></div><div class="spec val" id="val-uid_search"><a href="#val-uid_search" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>uid_search : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Search/index.html#type-key">Search.key</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-uid">uid</a> list<span class="keyword"> * </span><a href="index.html#type-modseq">modseq</a> option) Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-select"><a href="#val-select" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>select : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;read_only:bool <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">select imap m</code> selects the mailbox <code class="code">m</code> for access.</p></div></div><div class="spec val" id="val-append"><a href="#val-append" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>append : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> ?&#8288;flags:<a href="Flag/index.html#type-flag">Flag.flag</a> list <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">append imap mbox flags id data</code> appends <code class="code">data</code> as a new message to the end
of the mailbox <code class="code">mbox</code>. An optional flag list can be passed using the <code class="code">flags</code>
argument.</p></div></div><div class="spec val" id="val-fetch"><a href="#val-fetch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fetch : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;changed_since:<a href="index.html#type-modseq">modseq</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-seq">seq</a> list <span class="keyword">&#8209;&gt;</span> <a href="Fetch/index.html#type-t">Fetch.t</a> list <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-seq">seq</a><span class="keyword"> * </span><a href="Fetch/index.html#type-response">Fetch.response</a>) Lwt_stream.t</code></div><div class="doc"><p><code class="code">fetch imap uid ?changed_since set att</code> retrieves data associated with
messages with sequence number in <code class="code">set</code>.</p><p>If the <code class="code">?changed_since</code> argument is passed, only those messages with
<code class="code">CHANGEDSINCE</code> mod-sequence value at least the passed value are affected
(requires the <code class="code">CONDSTORE</code> extension).</p></div></div><div class="spec val" id="val-uid_fetch"><a href="#val-uid_fetch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>uid_fetch : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;changed_since:<a href="index.html#type-modseq">modseq</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-uid">uid</a> list <span class="keyword">&#8209;&gt;</span> <a href="Fetch/index.html#type-t">Fetch.t</a> list <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-seq">seq</a><span class="keyword"> * </span><a href="Fetch/index.html#type-response">Fetch.response</a>) Lwt_stream.t</code></div><div class="doc"></div></div><div class="spec type" id="type-store_mode"><a href="#type-store_mode" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>store_mode</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-store_mode.Add" class="anchored"><td class="def constructor"><a href="#type-store_mode.Add" class="anchor"></a><code><span class="keyword">| </span></code><code>`Add</code></td></tr><tr id="type-store_mode.Remove" class="anchored"><td class="def constructor"><a href="#type-store_mode.Remove" class="anchor"></a><code><span class="keyword">| </span></code><code>`Remove</code></td></tr><tr id="type-store_mode.Set" class="anchored"><td class="def constructor"><a href="#type-store_mode.Set" class="anchor"></a><code><span class="keyword">| </span></code><code>`Set</code></td></tr></table><code> ]</code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-store_kind"><a href="#type-store_kind" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>store_kind</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-store_kind.Flags" class="anchored"><td class="def constructor"><a href="#type-store_kind.Flags" class="anchor"></a><code><span class="keyword">| </span></code><code>`Flags<span class="keyword"> of </span><a href="Flag/index.html#type-flag">Flag.flag</a> list</code></td></tr><tr id="type-store_kind.Labels" class="anchored"><td class="def constructor"><a href="#type-store_kind.Labels" class="anchor"></a><code><span class="keyword">| </span></code><code>`Labels<span class="keyword"> of </span>string list</code></td></tr></table><code> ]</code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-store"><a href="#val-store" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>store : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;unchanged_since:<a href="index.html#type-modseq">modseq</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-store_mode">store_mode</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-seq">seq</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-store_kind">store_kind</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">store imap ?unchanged_since mode nums kind</code> modifies <code class="code">kind</code> according to
<code class="code">mode</code> for those message with sequence number in <code class="code">nums</code>.</p><p>If <code class="code">?unchanged_since</code> is present, then only those messages with <code class="code">UNCHANGEDSINCE</code>
mod-sequence value at least the passed value are affected.</p></div></div><div class="spec val" id="val-uid_store"><a href="#val-uid_store" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>uid_store : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;unchanged_since:<a href="index.html#type-modseq">modseq</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-store_mode">store_mode</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-uid">uid</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-store_kind">store_kind</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"></div></div></body></html>